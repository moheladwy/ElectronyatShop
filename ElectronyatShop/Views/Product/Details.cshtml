@model Product
@{
	ViewData["Title"] = "Product Details";
	decimal actualPrice = (Model.DiscountPercentage > 0) ? 
	(Model.Price - (Model.DiscountPercentage * Model.Price / 100)) : Model.Price;
}

<!-- Product section-->
<section class="py-5">
	<div class="container px-4 px-lg-5 my-5">
		<div class="row gx-4 gx-lg-5 align-items-center">
			<div class="col-md-6 img-container">
				<img class="card-img-top mb-5 mb-md-0 product-img" src="~/Images/@Model.Image" alt="@Model.Name">
			</div>
			<div class="col-md-6">
				<h1 class="product-name display-5">@Model.Name</h1>
				<div class="fs-5 mb-5">
					@if (Model.DiscountPercentage > 0)
					{
						<span class="text-decoration-line-through">$@Model.Price</span>
						<span style="margin: 0 10px;"> - </span>
						<span>@actualPrice</span>
					}
					else
					{
						<span>$@Model.Price</span>
					}
				</div>
				<p class="lead">@Model.Description</p>
				<div class="fs-5 mb-5">
					@if (Model.AvailableQuantity > 0)
					{
						<span>Available: (@Model.AvailableQuantity)</span>
					}
					else
					{
						<span style="color: red;">Not available right now</span>
					}
				</div>
				<!-- Shopping Cart -->
				<form method="post" action="~/Cart/AddToCart">
					<div class="d-flex">
						<input asp-for="Id" hidden>
						<input class="input-quantity form-control text-center me-3" id="inputQuantity" type="number"
							   value="1" max="@Model.AvailableQuantity" min="1" name="Quantity">
						<button class="action btn btn-outline-dark flex-shrink-0 me-3" type="submit">
							<i class="bi-cart-fill me-1"></i>
							Add to cart
						</button>
						<a class="action btn btn-outline-dark flex-shrink-0" asp-controller="Product" asp-action="Index">Back</a>
					</div>
				</form>
			</div>
		</div>
	</div>
</section>

@section Links {
	<link rel="icon" type="image/x-icon" href="~/assets/favicon.ico" />
	<style>
		.product-name {
			font-size: 40px;
			font-weight: 600;
			text-align: left;
		}

		.img-container {
			margin-right: 5px;
			max-width: 425px;
		}

		.product-img {
			max-width: 350px;
			max-height: 400px;
			margin-top: 1em;
		}

		.input-quantity {
			max-width: 4rem;
			border-radius: 1em;
		}

		.action {
			padding: 15px;
			border-radius: 1em;
		}
	</style>
}

@section Scripts {
	<!-- Core theme JS-->
	<script src="~/js/scripts.js"></script>
	<script src="~/lib/jquery/dist/jquery.min.js"></script>
	<script src="~/lib/jquery-validation/dist/jquery.validate.min.js"></script>
	<script src="~/lib/jquery-validation-unobtrusive/jquery.validate.unobtrusive.min.js"></script>
}